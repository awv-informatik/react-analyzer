// Pre-defined: clear(), show(), results(), url, view, SocketIO, Rest, Object3, Presentation


for (let client = 0; client < 30; client++) {
    setTimeout(async () => {
        let connection = await (new SocketIO()).connect(url)
        console.log("client " + connection.id)
        let tasks = []
        for (let task = 0; task < 3; task++) {
            console.log("   task " + task)
            tasks.push(connection.execute(`
                // Init tooldesigner and load tool
                _C.ToolDesigner3d.InitApplication("Drawings/3dToolDesigner/3dToolDesigner.of1");
                _O.ToolDesigner3d.LoadExistingTool("Drawings/ISO_Tool/Demo_Tool.of1");
                RETURN _O.ToolDesigner3d.GetComponentParams("EXTENSION");
            `))
        }
        await Promise.all(tasks)
        connection.disconnect()
    }, 1)
}
